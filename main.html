<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>TOOL T√ÄI X·ªàU - MD5 & M√£ Phi√™n</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f2f5;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    .container {
      background: #fff;
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.15);
      width: 400px;
      text-align: center;
    }

    h2 {
      color: #2c3e50;
      margin-bottom: 10px;
    }

    #keyTime {
      margin-bottom: 10px;
      color: #e74c3c;
      font-weight: bold;
    }

    .logout-btn {
      margin-bottom: 20px;
      background: #e74c3c;
      color: #fff;
      border: none;
      padding: 8px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
    }

    .tabs {
      display: flex;
      justify-content: center;
      margin-bottom: 20px;
    }

    .tab {
      padding: 10px 20px;
      margin: 0 5px;
      background: #3498db;
      color: #fff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: 0.3s;
    }

    .tab.active {
      background: #2c3e50;
    }

    input {
      width: 85%;
      padding: 10px;
      margin-top: 15px;
      font-size: 16px;
      border: 2px solid #ccc;
      border-radius: 8px;
    }

    button.analyze {
      margin-top: 15px;
      padding: 12px 25px;
      background: #27ae60;
      color: white;
      font-size: 16px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: 0.3s;
    }

    button.analyze:hover {
      background: #219150;
    }

    .result {
      margin-top: 20px;
      font-size: 18px;
      font-weight: bold;
    }

    .tai { color: #e74c3c; }
    .xiu { color: #1abc9c; }
  </style>

  <script>
    function formatTime(ms) {
      const totalSeconds = Math.floor(ms / 1000);
      const hours = Math.floor(totalSeconds / 3600);
      const minutes = Math.floor((totalSeconds % 3600) / 60);
      const seconds = totalSeconds % 60;
      return `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
    }

    function checkActiveKeyAndCountdown() {
      const activeKey = localStorage.getItem("activeKey");
      const list = JSON.parse(localStorage.getItem("keyList")) || [];
      const keyObj = list.find(k => k.key === activeKey);

      if (!keyObj) {
        alert("Key kh√¥ng t·ªìn t·∫°i!");
        localStorage.removeItem("activeKey");
        window.location.href = "index.html";
        return;
      }

      if (keyObj.usesLeft !== null && keyObj.usesLeft <= 0) {
        alert("Key ƒë√£ h·∫øt s·ªë l∆∞·ª£t s·ª≠ d·ª•ng!");
        localStorage.removeItem("activeKey");
        window.location.href = "index.html";
        return;
      }

      if (!keyObj.forever && Date.now() > keyObj.expire) {
        alert("Key ƒë√£ h·∫øt h·∫°n!");
        localStorage.removeItem("activeKey");
        window.location.href = "index.html";
        return;
      }

      const timeDisplay = document.getElementById("keyTime");
      if (timeDisplay) {
        if (keyObj.forever) {
          timeDisplay.textContent = "Key: Vƒ©nh vi·ªÖn";
        } else {
          const timeLeft = keyObj.expire - Date.now();
          timeDisplay.textContent = `Th·ªùi gian c√≤n l·∫°i: ${formatTime(timeLeft)}`;
        }
      }
    }

    function logout() {
      if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën ƒëƒÉng xu·∫•t kh√¥ng?")) {
        localStorage.removeItem("activeKey");
        window.location.href = "index.html";
      }
    }

    window.addEventListener("load", () => {
      checkActiveKeyAndCountdown();
      setInterval(checkActiveKeyAndCountdown, 1000);
    });
  </script>
</head>
<body>

  <div class="container">
    <h2>TOOL VIP BINTRANDZ HACK TX HITCLUB</h2>
    <div id="keyTime">ƒêang ki·ªÉm tra key...</div>
    <button class="logout-btn" onclick="logout()">ƒêƒÉng xu·∫•t / Tho√°t</button>

    <div class="tabs">
      <button class="tab active" onclick="switchTab('md5')">MD5</button>
      <button class="tab" onclick="switchTab('maphien')">M√£ Phi√™n</button>
    </div>

    <input type="text" id="inputCode" placeholder="Nh·∫≠p m√£ MD5 ho·∫∑c m√£ phi√™n..." />
    <button class="analyze" onclick="predictTX()">Ph√¢n T√≠ch</button>
    <div id="resultBox" class="result">K·∫øt qu·∫£ s·∫Ω hi·ªÉn th·ªã ·ªü ƒë√¢y</div>
  </div>

  <script>
    let currentTab = 'md5';

    function switchTab(tab) {
      currentTab = tab;
      document.getElementById("inputCode").value = "";
      document.getElementById("resultBox").innerText = "K·∫øt qu·∫£ s·∫Ω hi·ªÉn th·ªã ·ªü ƒë√¢y";

      document.querySelectorAll('.tab').forEach(btn => btn.classList.remove('active'));
      event.target.classList.add('active');

      const placeholder = tab === 'md5' ? 'Nh·∫≠p m√£ MD5...' : 'Nh·∫≠p m√£ phi√™n...';
      document.getElementById("inputCode").placeholder = placeholder;
    }

    function predictTX() {
      const input = document.getElementById("inputCode").value.trim();
      const resultBox = document.getElementById("resultBox");

      if (!input) {
        resultBox.innerHTML = "‚ö†Ô∏è Vui l√≤ng nh·∫≠p m√£.";
        resultBox.className = "result";
        return;
      }

      // Chuy·ªÉn m√£ th√†nh s·ªë ƒë·ªÉ ph√¢n t√≠ch
      let total = 0;
      for (let i = 0; i < input.length; i++) {
        total += input.charCodeAt(i);
      }

      // L·∫•y 3 ch·ªØ s·ªë cu·ªëi
      let lastThree = total % 1000;
      let sum = Math.floor(lastThree / 100) + Math.floor((lastThree % 100) / 10) + (lastThree % 10);

      // X√°c ƒë·ªãnh t√†i/x·ªâu
      let result = sum >= 11 ? "ü´∞ T√†i" : "üñï X·ªâu";

      // T√≠nh x√°c su·∫•t d·ª±a tr√™n gi√° tr·ªã sum
      let percent;
      if (sum >= 11) {
        // T√†i: X√°c su·∫•t t·ª∑ l·ªá thu·∫≠n v·ªõi sum (t·ª´ 70% ƒë·∫øn 95%)
        percent = 70 + ((sum - 11) / (18 - 11)) * 25; // T·ª∑ l·ªá t·ª´ 70% ƒë·∫øn 95%
      } else {
        // X·ªâu: X√°c su·∫•t t·ª∑ l·ªá ngh·ªãch v·ªõi sum (t·ª´ 70% ƒë·∫øn 95%)
        percent = 95 - ((sum - 3) / (10 - 3)) * 25; // T·ª∑ l·ªá t·ª´ 70% ƒë·∫øn 95%
      }
      percent = percent.toFixed(2);

      // Hi·ªÉn th·ªã k·∫øt qu·∫£ v·ªõi m√†u s·∫Øc t∆∞∆°ng ·ª©ng
      resultBox.innerHTML = `üîç K·∫øt qu·∫£: <span class="${sum >= 11 ? 'tai' : 'xiu'}">${result}</span><br>üéØ T·ªâ l·ªá ch√≠nh x√°c: <strong>${percent}%</strong>`;
      resultBox.className = `result ${sum >= 11 ? 'tai' : 'xiu'}`;
    }
  </script>

</body>
</html>